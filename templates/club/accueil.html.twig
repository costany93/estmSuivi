{% extends 'base.html.twig' %}

{% block title %}Club home - ESTM{% endblock %}

{% block body %}
    
    <div id="club-section" style="background-image: url({{asset('build/images/logo.png')}})">
        <div class="club-inner body-begin dark-overlay">
            <div class="container">
                    <h1 class="text-white text-shadow-club">Amicale vous souhaite la bienvenue
                    </h1>
                    <h2 class="text-white text-shadow-club">{{app.user.firstname}} {{app.user.lastname}}</h2>
            </div>
        </div>
    </div>
    {% include "shared/_navPillClub.html.twig" with {'club': club} %}

    <div id="third-section">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="text-center estm-text-color-blue">Activités récemment mis en ligne</h2>
                </div>
                {% if is_granted('ROLE_PRESIDENT_CLUB') or is_granted('ROLE_ADMIN') %}
                    <div class="col-lg-12">
                        <div class="row d-flex justify-content-center">
                            <a href="{{path('activity_add', {slug: club.slug})}}" class="btn btn-success">Nouvelle activité</a>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="container-fluid mt-4 my-3">
            <div class="container ">
                <div class="row">
                    {% for activity in club.activities %}
                        {% include "shared/_cardActivity.html.twig" with {'activity': activity } %}
                    {% endfor %}
                    <div class="col-lg-12 my-2">
                        <div class="row d-flex justify-content-center">
                            <div class="col-lg-3">
                                <a href="#" class="btn btn-success btn-block">Voir plus</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="third-section">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="text-center estm-text-color-blue">Informations récemment mis en ligne</h2>
                </div>
                {% if is_granted('ROLE_PRESIDENT_CLUB') or is_granted('ROLE_ADMIN') %}
                    <div class="col-lg-12">
                        <div class="row d-flex justify-content-center">
                            <a href="{{path('information_add', {slug: club.slug})}}" class="btn btn-success">Nouvelle information</a>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="container-fluid mt-4 my-3">
            <div class="container ">
                <div class="row">
                    {% for information in club.informations %}
                        {% include "shared/_cardInfo.html.twig" with {'information': information} %}
                    {% endfor %}
                    <div class="col-lg-12 my-2">
                        <div class="row d-flex justify-content-center">
                            <div class="col-lg-3">
                                <a href="#" class="btn btn-success btn-block">Voir plus</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="container">
        <h2 class="text-center estm-text-color-blue my-2">Informations sur le club</h2>
        <div class="row">
            {% if club.president is not null %}
                {% set president = club.president.etudiant.user %}
                <div class="col-lg-6">
                    <p class="text-center">Président</p>
                    <div class="row d-flex justify-content-center">
                        <div class="col-lg-6">
                            <img src="{{asset('build/images/logo.png')}}" alt="" class="img-fluid">
                        </div>
                    </div>
                    <p class="text-center">{{president.firstname}} {{president.lastname}}</p>
                    <p class="text-center">{{club.president.etudiant.classe.niveau}} {{club.president.etudiant.filiere.nom}}</p>
                    <p class="text-center">{{president.email}}</p>
                    <p class="text-center">{{president.phone}}</p>
                </div>
            {% else %}
                <div class="col-lg-6">
                    <h5 class="text-danger">Président du club</h5>
                    <h6>Ce club n'as pas encore de president, Veuillez le signaler aux administrateurs</h6>
                </div>
            {% endif %}
            <div class="col-lg-6">
                <p class="text-center">Description du club</p>
                <p>{{club.description}}</p>
            </div>
        </div>
    </div>

    {% include "shared/_footer.html.twig" %}
{% endblock %}